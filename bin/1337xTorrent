#! /bin/bash

echo "Donwload Torrent without ads "


download_movie()
{


    command_movie=`lynx -dump -listonly https://1337x.to/category-search/$1/Movies/1/ | awk '{print $2}' |grep "torrent/" |grep -v https://1337x.to/category-search/$1/Movies ` 

    query=($command_movie)

    select opt in "${query[@]}" quit
    do

        case $opt in
            "quit")
                exit

        esac
        
        magnet_movie=`lynx -dump -listonly $opt | awk '{print $2}' | grep magnet `
        
        query_magnet=($magnet_movie)

        qbittorrent  ${query_magnet[0]}&

        sleep 2
        
        exit

        

    done

}



download_anime()
{


    command_anime=`lynx -dump -listonly https://1337x.to/category-search/$1/Anime/1/ | awk '{print $2}' |grep "torrent/" |grep -v https://1337x.to/category-search/$1/Movies `

    query=($command_anime)

    select opt in "${query[@]}" quit
    do

        case $opt in
            "quit")
                exit

        esac

        magnet_anime=`lynx -dump -listonly $opt | awk '{print $2}' | grep magnet `

        query_magnet=($magnet_anime)

        qbittorrent  ${query_magnet[0]}&

        sleep 2

        exit



    done

}






download_tv()
{


    command_movie=`lynx -dump -listonly https://1337x.to/category-search/$1/TV/1/ | awk '{print $2}' |grep "torrent/" |grep -v https://1337x.to/category-search/$1/Movies ` 

    query=($command_movie)

    select opt in "${query[@]}" quit
    do

        case $opt in
            "quit")
                exit

        esac
        
        magnet_movie=`lynx -dump -listonly $opt | awk '{print $2}' | grep magnet `
        
        query_magnet=($magnet_movie)

        qbittorrent  ${query_magnet[0]}&

        sleep 2
        
        exit

        

    done


}


download_game()
{


    command=`lynx -dump -listonly https://1337x.to/search/$1/1/ | awk '{print $2}'  | grep  "FitGirl" | grep -v "https://1337x.to/user/FitGirl/"`

    query=($command)

    select opt in "${query[@]}" quit
        do

            case $opt in
                "quit")
                    exit

            esac


            magnet_game=`lynx -dump -listonly $opt | awk '{print $2}' | grep magnet`


            query_magnet=($magnet_game)

            qbittorrent ${query_magnet[0]}&

            sleep 2

            exit

        done


}

download_music()
{
    echo "Nothing yet!"
}



main_menu(){


	if [ $1 == "Movie" ]; then
		download_movie $2
	
	elif [ $1 == "Series"  ]; then
		download_tv $2
	
	elif [ $1 == "Games"  ]; then
		download_game $2
	
	elif [ $1 == "Animes" ];then
		download_anime $2

	else
		echo "Example: 1337xtorrent Games Solasta"
		echo "Avaliable options: Games, Movies, Series, Music and Animes"
	fi

}



if [ $# -lt 1 ] || [ $# -eq 0  ];then
	main_menu $1 $2 2> /dev/null
else
	main_menu $1 $2
fi



