#! /bin/bash

bold=$(tput bold)

echo "Donwload Torrent without ads "




download()
{


    command=`lynx -dump -listonly https://1337x.to/category-search/$2/"$1"/1/ | awk '{print $2}' | grep ".to/torrent"   `

    query=($command)
    select opt in "${query[@]}"  quit
        do
	    case $opt in
                "quit")
                exit

            esac
        
	
	clear			

    total_size=`lynx -dump  $opt | grep 'Total size' | awk '{print $4}'`
    unity=`lynx -dump  $opt | grep 'Total size' | awk '{print $5}'`
	magnet=`lynx -dump -listonly $opt | awk '{print $2}' | grep magnet`
    query_magnet=($magnet)
			
	echo $kek "Total size: "$kek $total_size $kek $unity
	read -p  "Is this okay? Yes/No:  " okay

	if [ $okay == "Yes"  ] || [ $okay == "yes" ] || [ $okay == "YES" ] || [ $okay == "y" ];then
	    qbittorrent ${query_magnet[0]}& 
	else
	    exit
	fi		
		
		sleep 2
		clear
        exit

    done    


}

download_anyShit()
{


    command=`lynx -dump -listonly https://1337x.to/search/$1/1/ | awk '{print $2}' | grep ".to/torrent"   `

    query=($command)
    select opt in "${query[@]}"  quit
        do

            case $opt in
                "quit")
                    exit

            esac

			clear			

            total_size=`lynx -dump  $opt | grep 'Total size' | awk '{print $4}'`
            unity=`lynx -dump  $opt | grep 'Total size' | awk '{print $5}'`
			magnet=`lynx -dump -listonly $opt | awk '{print $2}' | grep magnet`
           	query_magnet=($magnet)
			
			echo $kek "Total size: "$kek $total_size $kek $unity
			read -p  "Is this okay? Yes/No:  " okay

			if [ $okay == "Yes"  ];then
				qbittorrent ${query_magnet[0]}&
			else
				exit
			fi		

            sleep 2

            exit

        done


}



main_menu(){

	if [ $1 == "Movies" ]; then
		download $1 $2
	
	elif [ $1 == "Series"  ]; then
		tv="TV"
		download $tv $2
	
	elif [ $1 == "Games"  ]; then
		download $1 $2
	
	elif [ $1 == "Animes" ];then
		anime="Anime"
		download $anime $2

	else
		echo "Example: 1337xtorrent Games Solasta"
		echo "Avaliable options: Games, Movies, Series, Music and Animes"
	fi

}



if [ $# -eq 0  ]; then
	main_menu $1 $2 2> /dev/null
elif [ $# -eq 1 ]; then 
	download_anyShit $1 
else
	main_menu $1 $2
fi



